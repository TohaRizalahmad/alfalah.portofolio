<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Formulir Pendaftaran - Pondok Pesantren Al-Falah</title>
  <link rel="icon" type="image/png" href="img/Properti Utama/Logo Browser.png">
  <meta name="description" content="Formulir Pendaftaran Santri Baru Pondok Pesantren Al-Falah Teluk Dalem Ilir Rumbia Lampung Tengah.">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Berkshire+Swash&display=swap" rel="stylesheet">

  <style>
    /* ========== RESET & BASE ========== */
    *, *::before, *::after {
      margin: 0; padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #28443F;
      --primary-dark: #1a2e2b;
      --secondary: #FFFCEF;
      --accent: #D4AF37;
      --accent-light: rgba(212,175,55,0.15);
      --text-dark: #2d2d2d;
      --text-light: #fff;
      --border: rgba(212,175,55,0.3);
      --transition: 0.3s ease;
      --shadow: 0 8px 30px rgba(0,0,0,0.12);
    }

    html { scroll-behavior: smooth; overflow-x: hidden; }

    body {
      font-family: 'Poppins', sans-serif;
      color: var(--text-dark);
      background: var(--secondary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ========== NAVBAR ========== */
    .navbar {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      background: var(--primary);
      padding: 15px 8%;
      z-index: 9999;
      box-shadow: 0 2px 10px rgba(0,0,0,0.15);
      transition: var(--transition);
    }

    .navbar.scrolled {
      padding: 10px 8%;
      background: rgba(40,68,63,0.98);
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .nav-logo { height: 50px; width: auto; }

    .nav-logo-text {
      color: var(--text-light);
      font-weight: 700;
      font-size: 18px;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .nav-logo-text span {
      font-size: 13px;
      font-weight: 400;
      opacity: 0.8;
      display: block;
    }

    .nav-menu {
      display: flex;
      gap: 35px;
      list-style: none;
      align-items: center;
    }

    .nav-menu a {
      color: var(--text-light);
      text-decoration: none;
      font-weight: 500;
      font-size: 15px;
      transition: var(--transition);
      position: relative;
    }

    .nav-menu a::after {
      content: '';
      position: absolute;
      bottom: -5px; left: 0;
      width: 0; height: 2px;
      background: var(--accent);
      transition: var(--transition);
    }

    .nav-menu a:hover::after { width: 100%; }
    .nav-menu a:hover { color: var(--accent); }

    .nav-menu a.active { color: var(--accent); }
    .nav-menu a.active::after { width: 100%; }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .hamburger span {
      width: 25px; height: 3px;
      background: var(--text-light);
      transition: var(--transition);
      border-radius: 2px;
    }

    .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(8px, 8px); }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }

    /* ========== PAGE HERO ========== */
    .page-hero {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 60%, #3a5f58 100%);
      padding: 140px 8% 80px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .page-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(circle at 20% 50%, rgba(212,175,55,0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(212,175,55,0.06) 0%, transparent 40%);
    }

    /* decorative arabic pattern */
    .page-hero::after {
      content: '‚ú¶';
      position: absolute;
      font-size: 300px;
      color: rgba(212,175,55,0.04);
      top: -50px; right: -30px;
      line-height: 1;
      pointer-events: none;
    }

    .page-hero-inner { position: relative; z-index: 1; }

    .page-hero-badge {
      display: inline-block;
      background: var(--accent-light);
      border: 1px solid var(--border);
      color: var(--accent);
      font-size: 13px;
      font-weight: 600;
      padding: 6px 20px;
      border-radius: 50px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      margin-bottom: 20px;
    }

    .page-hero h1 {
      font-family: 'Berkshire Swash', cursive;
      font-size: 48px;
      color: var(--text-light);
      margin-bottom: 15px;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .page-hero p {
      font-size: 17px;
      color: rgba(255,255,255,0.85);
      max-width: 600px;
      margin: 0 auto 30px;
      line-height: 1.8;
    }

    .hero-steps {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .hero-step {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      padding: 10px 20px;
      border-radius: 50px;
      color: rgba(255,255,255,0.9);
      font-size: 14px;
    }

    .hero-step-num {
      width: 24px; height: 24px;
      background: var(--accent);
      color: var(--primary-dark);
      border-radius: 50%;
      font-weight: 700;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    /* ========== MAIN CONTENT ========== */
    .main-content {
      max-width: 1000px;
      margin: 0 auto;
      padding: 100px 20px 80px;
    }

    /* ========== FORM CARD ========== */
    .form-card {
      background: #fff;
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow: hidden;
      margin-bottom: 30px;
    }

    .form-card-header {
      background: var(--primary);
      padding: 25px 35px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .form-card-icon {
      width: 44px; height: 44px;
      background: var(--accent-light);
      border: 2px solid var(--accent);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }

    .form-card-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-light);
    }

    .form-card-header p {
      font-size: 13px;
      color: rgba(255,255,255,0.7);
      margin-top: 2px;
    }

    .form-card-body {
      padding: 35px;
    }

    /* ========== FORM ELEMENTS ========== */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-row.triple {
      grid-template-columns: 1fr 1fr 1fr;
    }

    .form-row.full {
      grid-template-columns: 1fr;
    }

    .form-group {
      margin-bottom: 22px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 8px;
    }

    .form-group label .required {
      color: #e53935;
      margin-left: 3px;
    }

    .form-group label .optional {
      color: #999;
      font-size: 12px;
      font-weight: 400;
      margin-left: 5px;
    }

    .form-control {
      width: 100%;
      padding: 13px 16px;
      border: 2px solid #e8e8e8;
      border-radius: 10px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      color: var(--text-dark);
      background: #fafafa;
      transition: var(--transition);
      outline: none;
      appearance: none;
    }

    .form-control:focus {
      border-color: var(--accent);
      background: #fff;
      box-shadow: 0 0 0 4px rgba(212,175,55,0.1);
    }

    .form-control:valid:not(:placeholder-shown) {
      border-color: #4caf50;
      background: #f8fff8;
    }

    .form-control.error {
      border-color: #e53935;
      background: #fff8f8;
    }

    textarea.form-control {
      resize: vertical;
      min-height: 110px;
    }

    select.form-control {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2328443F' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 40px;
    }

    .form-hint {
      font-size: 12px;
      color: #888;
      margin-top: 5px;
    }

    .error-msg {
      font-size: 12px;
      color: #e53935;
      margin-top: 5px;
      display: none;
    }

    /* ========== RADIO & CHECKBOX ========== */
    .radio-group, .check-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 5px;
    }

    .radio-option, .check-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 10px 18px;
      border: 2px solid #e8e8e8;
      border-radius: 8px;
      font-size: 14px;
      transition: var(--transition);
      user-select: none;
    }

    .radio-option:hover, .check-option:hover {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    .radio-option input, .check-option input {
      accent-color: var(--accent);
      width: 16px; height: 16px;
    }

    .radio-option:has(input:checked), .check-option:has(input:checked) {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    /* ========== UPLOAD AREA ========== */
    .upload-area {
      border: 2px dashed #d0d0d0;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      background: #fafafa;
      position: relative;
    }

    .upload-area:hover, .upload-area.dragover {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    .upload-area input[type="file"] {
      position: absolute;
      inset: 0;
      opacity: 0;
      cursor: pointer;
      width: 100%;
      height: 100%;
    }

    .upload-icon { font-size: 36px; margin-bottom: 10px; }

    .upload-area p {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .upload-area span {
      font-size: 12px;
      color: #999;
    }

    .upload-preview {
      margin-top: 12px;
      display: none;
      align-items: center;
      gap: 10px;
      background: #f0f7f0;
      border: 1px solid #4caf50;
      border-radius: 8px;
      padding: 10px 15px;
      font-size: 13px;
      color: #2e7d32;
    }

    /* ========== PROGRAM SELECTOR ========== */
    .program-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 5px;
    }

    .program-option {
      position: relative;
      cursor: pointer;
    }

    .program-option input {
      position: absolute;
      opacity: 0;
    }

    .program-label {
      display: block;
      padding: 20px 15px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      text-align: center;
      transition: var(--transition);
      background: #fafafa;
    }

    .program-label:hover {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    .program-option input:checked + .program-label {
      border-color: var(--accent);
      background: var(--accent-light);
      box-shadow: 0 0 0 3px rgba(212,175,55,0.15);
    }

    .program-label .prog-icon { font-size: 30px; margin-bottom: 8px; }
    .program-label .prog-name { font-size: 14px; font-weight: 600; color: var(--primary); }
    .program-label .prog-desc { font-size: 12px; color: #777; margin-top: 4px; }

    /* ========== DIVIDER ========== */
    .form-divider {
      border: none;
      border-top: 1px solid #f0ece0;
      margin: 10px 0 28px;
    }

    /* ========== PROGRESS INDICATOR ========== */
    .progress-bar {
      background: #fff;
      border-radius: 16px;
      padding: 25px 35px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
    }

    .progress-bar h3 {
      font-size: 15px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 15px;
    }

    .progress-steps {
      display: flex;
      align-items: center;
      gap: 0;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      position: relative;
    }

    .progress-step:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 18px;
      left: calc(50% + 20px);
      right: calc(-50% + 20px);
      height: 2px;
      background: #e0e0e0;
      transition: var(--transition);
    }

    .progress-step.done:not(:last-child)::after { background: var(--accent); }

    .step-circle {
      width: 36px; height: 36px;
      border-radius: 50%;
      background: #e8e8e8;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 700;
      color: #999;
      transition: var(--transition);
      z-index: 1;
    }

    .progress-step.active .step-circle {
      background: var(--primary);
      color: #fff;
    }

    .progress-step.done .step-circle {
      background: var(--accent);
      color: var(--primary-dark);
    }

    .step-label {
      font-size: 11px;
      font-weight: 500;
      color: #aaa;
      margin-top: 6px;
      text-align: center;
    }

    .progress-step.active .step-label,
    .progress-step.done .step-label { color: var(--primary); }

    /* ========== SUBMIT SECTION ========== */
    .submit-section {
      background: var(--primary);
      border-radius: 20px;
      padding: 40px 35px;
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }

    .submit-section::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 80% 50%, rgba(212,175,55,0.1) 0%, transparent 60%);
    }

    .submit-section > * { position: relative; z-index: 1; }

    .submit-section h3 {
      font-size: 22px;
      font-weight: 700;
      color: var(--text-light);
      margin-bottom: 8px;
    }

    .submit-section p {
      font-size: 15px;
      color: rgba(255,255,255,0.8);
      margin-bottom: 25px;
    }

    .submit-btns {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn-submit {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 40px;
      background: var(--accent);
      color: var(--primary-dark);
      border: none;
      border-radius: 50px;
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      box-shadow: 0 5px 20px rgba(212,175,55,0.3);
    }

    .btn-submit:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(212,175,55,0.5);
    }

    .btn-submit:active { transform: translateY(0); }

    .btn-outline {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 35px;
      background: transparent;
      color: var(--text-light);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50px;
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
    }

    .btn-outline:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    /* ========== INFO BOX ========== */
    .info-box {
      background: #fff;
      border-radius: 16px;
      padding: 25px 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      border-left: 5px solid var(--accent);
    }

    .info-box h4 {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-box ul {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .info-box ul li {
      font-size: 14px;
      color: #555;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .info-box ul li::before {
      content: '‚úì';
      color: var(--accent);
      font-weight: 700;
      flex-shrink: 0;
      margin-top: 1px;
    }

    /* ========== SUCCESS MODAL ========== */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transition: var(--transition);
    }

    .modal-overlay.open {
      opacity: 1;
      pointer-events: all;
    }

    .modal-box {
      background: #fff;
      border-radius: 24px;
      padding: 50px 40px;
      text-align: center;
      max-width: 480px;
      width: 100%;
      transform: scale(0.8);
      transition: var(--transition);
    }

    .modal-overlay.open .modal-box { transform: scale(1); }

    .modal-icon {
      width: 80px; height: 80px;
      background: linear-gradient(135deg, var(--primary), #3a5f58);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      margin: 0 auto 25px;
      box-shadow: 0 10px 30px rgba(40,68,63,0.3);
    }

    .modal-box h3 {
      font-size: 26px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 12px;
    }

    .modal-box p {
      font-size: 15px;
      color: #666;
      line-height: 1.8;
      margin-bottom: 25px;
    }

    .modal-ref {
      background: var(--accent-light);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 20px;
      font-size: 14px;
      color: var(--primary);
      font-weight: 600;
      margin-bottom: 25px;
    }

    .modal-close {
      background: var(--accent);
      color: var(--primary-dark);
      border: none;
      padding: 14px 35px;
      border-radius: 50px;
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
    }

    .modal-close:hover { transform: translateY(-2px); }

    /* ========== FOOTER ========== */
    .footer {
      background: var(--primary-dark);
      color: rgba(255,255,255,0.7);
      text-align: center;
      padding: 30px 20px;
      font-size: 14px;
    }

    .footer a {
      color: var(--accent);
      text-decoration: none;
    }

    /* ========== WHATSAPP FLOAT ========== */
    .wa-float {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 58px; height: 58px;
      background: #25D366;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 5px 20px rgba(37,211,102,0.4);
      transition: var(--transition);
      z-index: 1000;
    }

    .wa-float:hover { transform: translateY(-5px) scale(1.05); }

    .wa-float .icon {
      width: 28px; height: 28px;
      background-image: url('https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg');
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      filter: brightness(0) invert(1);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
      .hamburger { display: flex; }

      .nav-menu {
        position: fixed;
        top: 80px; left: 0;
        width: 100%;
        background: var(--primary);
        flex-direction: column;
        gap: 0;
        padding: 20px 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s ease;
      }

      .nav-menu.active { max-height: 400px; }

      .nav-menu li { width: 100%; }

      .nav-menu a {
        display: block;
        padding: 14px 8%;
        border-bottom: 1px solid rgba(255,255,255,0.08);
      }

      .page-hero h1 { font-size: 32px; }
      .page-hero { padding: 120px 6% 60px; }

      .form-row { grid-template-columns: 1fr; }
      .form-row.triple { grid-template-columns: 1fr; }
      .form-card-body { padding: 25px 20px; }
      .form-card-header { padding: 20px 25px; }

      .progress-steps { overflow-x: auto; gap: 5px; }
      .step-label { font-size: 10px; }

      .submit-section { padding: 30px 20px; }
      .submit-btns { flex-direction: column; align-items: center; }

      .hero-steps { flex-direction: column; align-items: center; }
    }

    @media (max-width: 480px) {
      .main-content { padding: 90px 15px 60px; }
      .program-selector { grid-template-columns: 1fr 1fr; }
    }

    /* ========== ANIMATIONS ========== */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeInUp 0.6s ease forwards;
    }

    .fade-in:nth-child(2) { animation-delay: 0.1s; }
    .fade-in:nth-child(3) { animation-delay: 0.2s; }
    .fade-in:nth-child(4) { animation-delay: 0.3s; }

    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 18px; height: 18px;
      border: 2px solid rgba(40,68,63,0.3);
      border-radius: 50%;
      border-top-color: var(--primary-dark);
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .btn-submit.loading .btn-text { display: none; }
    .btn-submit.loading .spinner { display: inline-block; }
    .btn-submit .spinner { display: none; }

    /* Character counter */
    .char-counter {
      text-align: right;
      font-size: 12px;
      color: #aaa;
      margin-top: 4px;
    }

    .char-counter.near-limit { color: #f57c00; }
    .char-counter.at-limit { color: #e53935; }
  </style>
</head>
<body>

  <!-- ========== NAVBAR ========== -->
  <nav class="navbar" id="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-logo-text">
        <img src="img/Properti Utama/Logo Browser.png" alt="Logo Al-Falah" class="nav-logo" onerror="this.style.display='none'">
        <div>
          Pondok Pesantren Al-Falah
          <span>Teluk Dalem Ilir, Rumbia</span>
        </div>
      </a>

      <ul class="nav-menu" id="navMenu">
        <li><a href="index.html">Beranda</a></li>
        <li><a href="index.html#profil">Profil</a></li>
        <li><a href="index.html#program">Program</a></li>
        <li><a href="pendaftaran.html" class="active">Pendaftaran</a></li>
        <li><a href="index.html#kontak">Kontak</a></li>
      </ul>

      <button class="hamburger" id="hamburger" aria-label="Toggle menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- ========== MAIN CONTENT ========== -->
  <main class="main-content">

    <!-- Info Box -->
    <div class="info-box fade-in">
      <h4>üìã Syarat & Kelengkapan Berkas</h4>
      <ul>
        <li>Fotokopi Kartu Keluarga (KK) dan Akta Kelahiran</li>
        <li>Fotokopi Ijazah / SKHUN terakhir (dilegalisir)</li>
        <li>Pas foto 3√ó4 berlatar merah (4 lembar)</li>
        <li>Surat keterangan sehat dari dokter</li>
        <li>Surat rekomendasi dari orang tua / wali</li>
      </ul>
    </div>

    <!-- Form -->
    <form id="registrationForm" novalidate>

      <!-- === BAGIAN 1: DATA DIRI SANTRI === -->
      <div class="form-card fade-in">
        <div class="form-card-header">
          <div class="form-card-icon">üë§</div>
          <div>
            <h2>Data Diri Calon Santri</h2>
            <p>Lengkapi identitas pribadi dengan benar sesuai dokumen resmi</p>
          </div>
        </div>
        <div class="form-card-body">

          <div class="form-row">
            <div class="form-group">
              <label for="nama_lengkap">Nama Lengkap <span class="required">*</span></label>
              <input type="text" id="nama_lengkap" name="nama_lengkap" class="form-control"
                placeholder="Tulis nama lengkap sesuai akta" required autocomplete="name">
              <div class="error-msg" id="err-nama">Nama lengkap wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="nama_panggilan">Nama Panggilan <span class="optional">(opsional)</span></label>
              <input type="text" id="nama_panggilan" name="nama_panggilan" class="form-control"
                placeholder="Nama yang biasa dipanggil">
            </div>
          </div>

          <div class="form-row triple">
            <div class="form-group">
              <label for="tempat_lahir">Tempat Lahir <span class="required">*</span></label>
              <input type="text" id="tempat_lahir" name="tempat_lahir" class="form-control"
                placeholder="Kota/Kabupaten" required>
              <div class="error-msg" id="err-tmplahir">Tempat lahir wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="tgl_lahir">Tanggal Lahir <span class="required">*</span></label>
              <input type="date" id="tgl_lahir" name="tgl_lahir" class="form-control" required>
              <div class="error-msg" id="err-tgllahir">Tanggal lahir wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="nik">NIK (No. KTP/KK) <span class="optional">(opsional)</span></label>
              <input type="text" id="nik" name="nik" class="form-control"
                placeholder="16 digit" maxlength="16" pattern="\d{16}">
            </div>
          </div>

          <div class="form-group">
            <label>Jenis Kelamin <span class="required">*</span></label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="jenis_kelamin" value="Laki-laki" required>
                Laki-laki
              </label>
              <label class="radio-option">
                <input type="radio" name="jenis_kelamin" value="Perempuan">
                Perempuan
              </label>
            </div>
            <div class="error-msg" id="err-jk">Jenis kelamin wajib dipilih.</div>
          </div>

          <div class="form-group">
            <label for="alamat">Alamat Lengkap <span class="required">*</span></label>
            <textarea id="alamat" name="alamat" class="form-control"
              placeholder="Tulis alamat lengkap: Jalan, RT/RW, Desa/Kelurahan, Kecamatan, Kabupaten, Provinsi"
              required rows="3" maxlength="400"></textarea>
            <div class="char-counter" id="alamat-counter">0 / 400</div>
            <div class="error-msg" id="err-alamat">Alamat wajib diisi.</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="anak_ke">Anak ke- <span class="optional">(opsional)</span></label>
              <input type="number" id="anak_ke" name="anak_ke" class="form-control"
                placeholder="misal: 2" min="1" max="20">
            </div>
            <div class="form-group">
              <label for="penyakit">Riwayat Penyakit / Alergi <span class="optional">(opsional)</span></label>
              <input type="text" id="penyakit" name="penyakit" class="form-control"
                placeholder="Tulis jika ada, misal: Asma, Alergi seafood">
            </div>
          </div>

        </div>
      </div>

      <!-- === BAGIAN 2: DATA PENDIDIKAN === -->
      <div class="form-card fade-in">
        <div class="form-card-header">
          <div class="form-card-icon">üéì</div>
          <div>
            <h2>Riwayat Pendidikan</h2>
            <p>Informasi latar belakang pendidikan sebelumnya</p>
          </div>
        </div>
        <div class="form-card-body">

          <div class="form-row">
            <div class="form-group">
              <label for="asal_sekolah">Asal Sekolah Terakhir <span class="required">*</span></label>
              <input type="text" id="asal_sekolah" name="asal_sekolah" class="form-control"
                placeholder="Nama sekolah, misal: SDN 1 Rumbia" required>
              <div class="error-msg" id="err-sekolah">Asal sekolah wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="tahun_lulus">Tahun Lulus / Keluar <span class="required">*</span></label>
              <select id="tahun_lulus" name="tahun_lulus" class="form-control" required>
                <option value="">-- Pilih Tahun --</option>
              </select>
              <div class="error-msg" id="err-tahunlulus">Tahun lulus wajib dipilih.</div>
            </div>
          </div>

          <div class="form-group">
            <label for="jenjang">Jenjang Pendidikan Terakhir <span class="required">*</span></label>
            <select id="jenjang" name="jenjang" class="form-control" required>
              <option value="">-- Pilih Jenjang --</option>
              <option>SD / Sederajat</option>
              <option>SMP / MTs / Sederajat</option>
              <option>SMA / MA / SMK / Sederajat</option>
              <option>Perguruan Tinggi</option>
              <option>Belum pernah sekolah formal</option>
            </select>
            <div class="error-msg" id="err-jenjang">Jenjang pendidikan wajib dipilih.</div>
          </div>

          <div class="form-group">
            <label for="pengalaman_pesantren">Pengalaman Pesantren Sebelumnya <span class="optional">(opsional)</span></label>
            <textarea id="pengalaman_pesantren" name="pengalaman_pesantren" class="form-control"
              placeholder="Jika pernah mondok di tempat lain, sebutkan nama pesantren dan berapa lama"
              rows="2" maxlength="300"></textarea>
          </div>

        </div>
      </div>

      <!-- === BAGIAN 3: DATA ORANG TUA === -->
      <div class="form-card fade-in">
        <div class="form-card-header">
          <div class="form-card-icon">üë®‚Äçüë©‚Äçüëß</div>
          <div>
            <h2>Data Orang Tua / Wali</h2>
            <p>Informasi untuk keperluan administrasi dan komunikasi</p>
          </div>
        </div>
        <div class="form-card-body">

          <div class="form-row">
            <div class="form-group">
              <label for="nama_ayah">Nama Ayah <span class="required">*</span></label>
              <input type="text" id="nama_ayah" name="nama_ayah" class="form-control"
                placeholder="Nama lengkap ayah" required>
              <div class="error-msg" id="err-ayah">Nama ayah wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="pekerjaan_ayah">Pekerjaan Ayah</label>
              <input type="text" id="pekerjaan_ayah" name="pekerjaan_ayah" class="form-control"
                placeholder="misal: Petani, Wiraswasta">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="nama_ibu">Nama Ibu <span class="required">*</span></label>
              <input type="text" id="nama_ibu" name="nama_ibu" class="form-control"
                placeholder="Nama lengkap ibu" required>
              <div class="error-msg" id="err-ibu">Nama ibu wajib diisi.</div>
            </div>
            <div class="form-group">
              <label for="pekerjaan_ibu">Pekerjaan Ibu</label>
              <input type="text" id="pekerjaan_ibu" name="pekerjaan_ibu" class="form-control"
                placeholder="misal: Ibu Rumah Tangga, Guru">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="hp_ortu">No. HP Orang Tua / Wali <span class="required">*</span></label>
              <input type="tel" id="hp_ortu" name="hp_ortu" class="form-control"
                placeholder="Nomor aktif WhatsApp" required>
              <div class="error-msg" id="err-hportu">No. HP orang tua wajib diisi.</div>
            </div>
          </div>

        </div>
      </div>

      <!-- === BAGIAN 4: UNGGAH DOKUMEN === -->
      <div class="form-card fade-in">
        <div class="form-card-header">
          <div class="form-card-icon">üìé</div>
          <div>
            <h2>Unggah Dokumen</h2>
            <p>Format JPG, PNG, atau PDF. Maksimal 2MB per file.</p>
          </div>
        </div>
        <div class="form-card-body">

          <div class="form-row">
            <div class="form-group">
              <label>Foto Diri (3√ó4) <span class="optional">(opsional)</span></label>
              <div class="upload-area" id="upload-foto">
                <input type="file" name="foto_diri" accept="image/*" id="input-foto">
                <div class="upload-icon">üì∑</div>
                <p>Klik atau seret file ke sini</p>
                <span>JPG / PNG, maks 2MB</span>
                <div class="upload-preview" id="prev-foto">‚úÖ <span id="prev-foto-name"></span></div>
              </div>
            </div>
            <div class="form-group">
              <label>Kartu Keluarga (KK) <span class="optional">(opsional)</span></label>
              <div class="upload-area" id="upload-kk">
                <input type="file" name="kartu_keluarga" accept="image/*,application/pdf" id="input-kk">
                <div class="upload-icon">üè†</div>
                <p>Klik atau seret file ke sini</p>
                <span>JPG / PNG / PDF, maks 2MB</span>
                <div class="upload-preview" id="prev-kk">‚úÖ <span id="prev-kk-name"></span></div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Ijazah / SKHUN <span class="optional">(opsional)</span></label>
              <div class="upload-area" id="upload-ijazah">
                <input type="file" name="ijazah" accept="image/*,application/pdf" id="input-ijazah">
                <div class="upload-icon">üéì</div>
                <p>Klik atau seret file ke sini</p>
                <span>JPG / PNG / PDF, maks 2MB</span>
                <div class="upload-preview" id="prev-ijazah">‚úÖ <span id="prev-ijazah-name"></span></div>
              </div>
            </div>
            <div class="form-group">
              <label>Surat Keterangan Sehat <span class="optional">(opsional)</span></label>
              <div class="upload-area" id="upload-sehat">
                <input type="file" name="surat_sehat" accept="image/*,application/pdf" id="input-sehat">
                <div class="upload-icon">üè•</div>
                <p>Klik atau seret file ke sini</p>
                <span>JPG / PNG / PDF, maks 2MB</span>
                <div class="upload-preview" id="prev-sehat">‚úÖ <span id="prev-sehat-name"></span></div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- === SUBMIT === -->
      <div class="submit-section fade-in">
        <h3>Siap untuk Mendaftar? üéâ</h3>
        <p>Pastikan semua data sudah terisi dengan benar. Formulir akan dikirim langsung ke WhatsApp pondok untuk proses verifikasi.</p>
        <div class="submit-btns">
          <button type="submit" class="btn-submit" id="btnSubmit">
            <span class="btn-text">üì§ Kirim Pendaftaran</span>
            <span class="spinner"></span>
          </button>
          <button type="button" class="btn-outline" id="btnReset">üîÑ Reset Formulir</button>
        </div>
      </div>

    </form>
  </main>

  <!-- ========== FOOTER ========== -->
  <footer class="footer">
    ¬© 2025 Pondok Pesantren Al-Falah Teluk Dalem Ilir Rumbia &nbsp;|&nbsp;
    <a href="index.html">Kembali ke Beranda</a> &nbsp;|&nbsp;
    üìû <a href="https://wa.me/6285709662892">0857-0966-2892</a>
  </footer>

  <!-- WhatsApp Float -->
  <a href="https://wa.me/6285709662892?text=Assalamualaikum,%20saya%20ingin%20bertanya%20tentang%20pendaftaran" class="wa-float" target="_blank" aria-label="WhatsApp">
    <span class="icon wa"></span>
  </a>

  <!-- ========== SUCCESS MODAL ========== -->
  <div class="modal-overlay" id="successModal">
    <div class="modal-box">
      <div class="modal-icon">üéä</div>
      <h3>Pendaftaran Terkirim!</h3>
      <p>Terima kasih telah mendaftar di Pondok Pesantren Al-Falah. Tim kami akan segera menghubungi Anda melalui WhatsApp untuk proses verifikasi berikutnya.</p>
      <div class="modal-ref" id="refNumber"></div>
      <button class="modal-close" id="modalClose">Oke, Mengerti!</button>
    </div>
  </div>

  <!-- ========== JAVASCRIPT ========== -->
  <script>
    // ===== NAVBAR =====
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    const navbar = document.getElementById('navbar');

    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navMenu.classList.toggle('active');
    });

    window.addEventListener('scroll', () => {
      navbar.classList.toggle('scrolled', window.scrollY > 80);
    });

    // ===== POPULATE YEAR SELECT =====
    const tahunSelect = document.getElementById('tahun_lulus');
    const currentYear = new Date().getFullYear();
    for (let y = currentYear; y >= 1990; y--) {
      const opt = document.createElement('option');
      opt.value = y;
      opt.textContent = y;
      tahunSelect.appendChild(opt);
    }

    // ===== CHARACTER COUNTERS =====
    function setupCounter(textareaId, counterId, max) {
      const ta = document.getElementById(textareaId);
      const ct = document.getElementById(counterId);
      if (!ta || !ct) return;
      ta.addEventListener('input', () => {
        const len = ta.value.length;
        ct.textContent = `${len} / ${max}`;
        ct.className = 'char-counter' + (len >= max ? ' at-limit' : len >= max * 0.85 ? ' near-limit' : '');
      });
    }
    setupCounter('alamat', 'alamat-counter', 400);
    setupCounter('motivasi', 'motivasi-counter', 500);

    // ===== FILE UPLOAD =====
    function setupUpload(inputId, previewId, nameId) {
      const input = document.getElementById(inputId);
      const preview = document.getElementById(previewId);
      const nameSpan = document.getElementById(nameId);
      if (!input) return;

      input.addEventListener('change', () => {
        const file = input.files[0];
        if (!file) return;
        if (file.size > 2 * 1024 * 1024) {
          alert('Ukuran file terlalu besar! Maksimal 2MB.');
          input.value = '';
          return;
        }
        nameSpan.textContent = file.name;
        preview.style.display = 'flex';
      });
    }

    setupUpload('input-foto', 'prev-foto', 'prev-foto-name');
    setupUpload('input-kk', 'prev-kk', 'prev-kk-name');
    setupUpload('input-ijazah', 'prev-ijazah', 'prev-ijazah-name');
    setupUpload('input-sehat', 'prev-sehat', 'prev-sehat-name');

    // drag over styling
    document.querySelectorAll('.upload-area').forEach(area => {
      area.addEventListener('dragover', e => { e.preventDefault(); area.classList.add('dragover'); });
      area.addEventListener('dragleave', () => area.classList.remove('dragover'));
      area.addEventListener('drop', () => area.classList.remove('dragover'));
    });

    // ===== VALIDATION =====
    function setError(inputEl, msgEl, show) {
      if (inputEl) inputEl.classList.toggle('error', show);
      if (msgEl) msgEl.style.display = show ? 'block' : 'none';
    }

    function validateForm() {
      let valid = true;

      // Nama
      const nama = document.getElementById('nama_lengkap');
      const validNama = nama.value.trim().length >= 3;
      setError(nama, document.getElementById('err-nama'), !validNama);
      if (!validNama) valid = false;

      // Tempat lahir
      const tmp = document.getElementById('tempat_lahir');
      const validTmp = tmp.value.trim().length >= 2;
      setError(tmp, document.getElementById('err-tmplahir'), !validTmp);
      if (!validTmp) valid = false;

      // Tgl lahir
      const tgl = document.getElementById('tgl_lahir');
      const validTgl = tgl.value !== '';
      setError(tgl, document.getElementById('err-tgllahir'), !validTgl);
      if (!validTgl) valid = false;

      // Jenis kelamin
      const jk = document.querySelector('input[name="jenis_kelamin"]:checked');
      const jkErr = document.getElementById('err-jk');
      if (!jk) { jkErr.style.display = 'block'; valid = false; }
      else { jkErr.style.display = 'none'; }

      // HP
      const hp = document.getElementById('no_hp');
      const validHp = /^[0-9+]{9,15}$/.test(hp.value.trim());
      setError(hp, document.getElementById('err-hp'), !validHp);
      if (!validHp) valid = false;

      // Alamat
      const alamat = document.getElementById('alamat');
      const validAlamat = alamat.value.trim().length >= 10;
      setError(alamat, document.getElementById('err-alamat'), !validAlamat);
      if (!validAlamat) valid = false;

      // Asal sekolah
      const sekolah = document.getElementById('asal_sekolah');
      const validSekolah = sekolah.value.trim().length >= 3;
      setError(sekolah, document.getElementById('err-sekolah'), !validSekolah);
      if (!validSekolah) valid = false;

      // Tahun lulus
      const tahun = document.getElementById('tahun_lulus');
      const validTahun = tahun.value !== '';
      setError(tahun, document.getElementById('err-tahunlulus'), !validTahun);
      if (!validTahun) valid = false;

      // Jenjang
      const jenjang = document.getElementById('jenjang');
      const validJenjang = jenjang.value !== '';
      setError(jenjang, document.getElementById('err-jenjang'), !validJenjang);
      if (!validJenjang) valid = false;

      // Program
      const program = document.querySelector('input[name="program"]:checked');
      const progErr = document.getElementById('err-program');
      if (!program) { progErr.style.display = 'block'; valid = false; }
      else { progErr.style.display = 'none'; }

      // Nama ayah
      const ayah = document.getElementById('nama_ayah');
      const validAyah = ayah.value.trim().length >= 3;
      setError(ayah, document.getElementById('err-ayah'), !validAyah);
      if (!validAyah) valid = false;

      // Nama ibu
      const ibu = document.getElementById('nama_ibu');
      const validIbu = ibu.value.trim().length >= 3;
      setError(ibu, document.getElementById('err-ibu'), !validIbu);
      if (!validIbu) valid = false;

      // HP ortu
      const hpOrtu = document.getElementById('hp_ortu');
      const validHpOrtu = /^[0-9+]{9,15}$/.test(hpOrtu.value.trim());
      setError(hpOrtu, document.getElementById('err-hportu'), !validHpOrtu);
      if (!validHpOrtu) valid = false;

      return valid;
    }

    // ===== FORM SUBMIT =====
    const form = document.getElementById('registrationForm');
    const btnSubmit = document.getElementById('btnSubmit');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      if (!validateForm()) {
        // scroll to first error
        const firstError = document.querySelector('.error, [style*="display: block"].error-msg');
        if (firstError) {
          firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        return;
      }

      // Loading state
      btnSubmit.classList.add('loading');
      btnSubmit.disabled = true;

      // Collect data
      const data = {
        nama: document.getElementById('nama_lengkap').value.trim(),
        panggilan: document.getElementById('nama_panggilan').value.trim(),
        ttl: document.getElementById('tempat_lahir').value.trim() + ', ' + document.getElementById('tgl_lahir').value,
        jk: document.querySelector('input[name="jenis_kelamin"]:checked')?.value,
        hp: document.getElementById('no_hp').value.trim(),
        alamat: document.getElementById('alamat').value.trim(),
        sekolah: document.getElementById('asal_sekolah').value.trim() + ' (' + document.getElementById('tahun_lulus').value + ')',
        jenjang: document.getElementById('jenjang').value,
        program: document.querySelector('input[name="program"]:checked')?.value,
        ayah: document.getElementById('nama_ayah').value.trim(),
        ibu: document.getElementById('nama_ibu').value.trim(),
        hpOrtu: document.getElementById('hp_ortu').value.trim(),
        motivasi: document.getElementById('motivasi').value.trim(),
      };

      const ekskul = Array.from(document.querySelectorAll('input[name="ekskul"]:checked')).map(el => el.value).join(', ') || '-';

      const pesan = `*FORMULIR PENDAFTARAN SANTRI BARU*
Pondok Pesantren Al-Falah 2025/2026

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìã *DATA CALON SANTRI*
Nama Lengkap : ${data.nama}${data.panggilan ? ' (' + data.panggilan + ')' : ''}
TTL : ${data.ttl}
Jenis Kelamin : ${data.jk}
No. HP : ${data.hp}
Alamat : ${data.alamat}

üìö *PENDIDIKAN*
Asal Sekolah : ${data.sekolah}
Jenjang : ${data.jenjang}

üéØ *PROGRAM*
Program Pilihan : ${data.program}
Ekskul Diminati : ${ekskul}${data.motivasi ? '\nMotivasi : ' + data.motivasi : ''}

üë®‚Äçüë©‚Äçüëß *DATA ORANG TUA*
Ayah : ${data.ayah}
Ibu : ${data.ibu}
HP Orang Tua : ${data.hpOrtu}

_Mohon dikonfirmasi penerimaan formulir ini. Terima kasih._`;

      // Simulate processing delay
      setTimeout(() => {
        btnSubmit.classList.remove('loading');
        btnSubmit.disabled = false;

        // Generate ref number
        const ref = 'ALF-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 9000) + 1000);
        document.getElementById('refNumber').textContent = 'üìå No. Referensi: ' + ref;

        // Open WhatsApp
        window.open('https://wa.me/6285709662892?text=' + encodeURIComponent(pesan), '_blank');

        // Show modal
        document.getElementById('successModal').classList.add('open');
      }, 1500);
    });

    // ===== RESET =====
    document.getElementById('btnReset').addEventListener('click', () => {
      if (confirm('Yakin ingin mereset semua isian formulir?')) {
        form.reset();
        document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
        document.querySelectorAll('.error-msg').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.upload-preview').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.char-counter').forEach(el => el.textContent = el.textContent.split('/')[1] ? '0 /' + el.textContent.split('/')[1] : el.textContent);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });

    // ===== MODAL CLOSE =====
    document.getElementById('modalClose').addEventListener('click', () => {
      document.getElementById('successModal').classList.remove('open');
      form.reset();
      document.querySelectorAll('.upload-preview').forEach(el => el.style.display = 'none');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // ===== REAL-TIME VALIDATION =====
    document.querySelectorAll('.form-control[required]').forEach(input => {
      input.addEventListener('blur', () => {
        if (input.value.trim() === '' || (input.tagName === 'SELECT' && input.value === '')) {
          input.classList.add('error');
        } else {
          input.classList.remove('error');
        }
      });
      input.addEventListener('input', () => {
        if (input.value.trim() !== '') input.classList.remove('error');
      });
    });
  </script>

</body>
</html>